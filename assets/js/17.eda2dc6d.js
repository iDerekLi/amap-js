(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{398:function(t,a,s){"use strict";s.r(a);var n=s(52),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"安全密钥-v2-3-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安全密钥-v2-3-0"}},[t._v("#")]),t._v(" 安全密钥 v2.3.0")]),t._v(" "),s("p",{attrs:{color:"#f00"}},[t._v("\n注意：此次升级不会影响之前已获得 key 的使用；\n升级之后的新增的key必须要配备安全密钥一起使用，\n具体用法请您参看下文《JSAPI key和安全密钥设置和使用》（本次key升级新增安全密钥，是为了提升广大用户的对自己的key安全有效管理，降低明文传输被窃取的风险 。）\n")]),t._v(" "),s("h2",{attrs:{id:"方法一-通过代理服务器使用安全密钥-推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法一-通过代理服务器使用安全密钥-推荐"}},[t._v("#")]),t._v(" 方法一 通过代理服务器使用安全密钥 [推荐]")]),t._v(" "),s("h3",{attrs:{id:"_1-key搭配代理服务器并携带安全密钥转发-安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-key搭配代理服务器并携带安全密钥转发-安全"}},[t._v("#")]),t._v(" 1. key搭配代理服务器并携带安全密钥转发（安全）")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AMapJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AMapLoader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您申请的高德Key值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  security"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    serviceHost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您的代理服务器域名或地址/_AMapService'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-代理服务器的设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-代理服务器的设置"}},[t._v("#")]),t._v(" 2. 代理服务器的设置")]),t._v(" "),s("p",[t._v("以 Nginx 反向代理为例，参考以下三个location配置，进行反向代理设置，分别对应自定义地图、海外地图、Web服务，其中自定义地图和海外地图如果没有使用到相关功能也可以不设置。需要将以下配置中的“您的安全密钥”六个字替换为您刚刚获取的jscode安全密钥。")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen       80;             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nginx端口设置，可按实际端口修改")]),t._v("\n    server_name  127.0.0.1;      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#nginx server_name 对应进行配置，可按实际添加或修改")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义地图服务代理")]),t._v("\n    location /_AMapService/v4/map/styles "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('\n        set $args "$args'),s("span",{pre:!0,attrs:{class:"token important"}},[t._v('&jscode=您的安全密钥";')]),t._v("\n        proxy_pass https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//webapi.amap.com/v4/map/styles;\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 海外地图服务代理")]),t._v("\n    location /_AMapService/v3/vectormap "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('\n        set $args "$args'),s("span",{pre:!0,attrs:{class:"token important"}},[t._v('&jscode=您的安全密钥";')]),t._v("\n        proxy_pass https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//fmap01.amap.com/v3/vectormap;\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Web服务API 代理")]),t._v("\n    location /_AMapService/ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('\n        set $args "$args'),s("span",{pre:!0,attrs:{class:"token important"}},[t._v('&jscode=您的安全密钥";')]),t._v("\n        proxy_pass https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//restapi.amap.com/;\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("保存相关配置之后需要通过命令nginx -s reload  命令重新加载 nginx 配置文件")]),t._v(" "),s("h2",{attrs:{id:"方法二-直接使用安全密钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法二-直接使用安全密钥"}},[t._v("#")]),t._v(" 方法二 直接使用安全密钥")]),t._v(" "),s("p",[t._v("此方式仅建议开发环境使用")]),t._v(" "),s("div",{staticClass:"language-JavaScript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AMapJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AMapLoader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.0'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您申请的高德Key值'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  security"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    securityJsCode"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您申请的安全密钥'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"传统方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传统方式"}},[t._v("#")]),t._v(" 传统方式")]),t._v(" "),s("p",[t._v("具体细节参见"),s("a",{attrs:{href:"https://lbs.amap.com/api/javascript-api/guide/abc/prepare",target:"_blank",rel:"noopener noreferrer"}},[t._v("高德开发平台"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\nwindow"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_AMapSecurityConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  serviceHost"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'您的代理服务器域名或地址/_AMapService'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 例如 ：serviceHost:'http://1.1.1.1:80/_AMapService',")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://webapi.amap.com/maps?v=1.4.15&key=您申请的key值"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);